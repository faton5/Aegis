{
  "permissions": {
    "allow": [
      "mcp__supabase-community-supabase-mcp__list_tables",
      "mcp__supabase-community-supabase-mcp__get_project_url",
      "mcp__supabase-community-supabase-mcp__apply_migration",
      "mcp__supabase-community-supabase-mcp__get_anon_key",
      "Bash(python:*)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pip install -r requirements.txt)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" bot.py)",
      "Bash(rm:*)",
      "Bash(mv:*)",
      "Bash(mkdir:*)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"from guild_config import guild_config; print(f''Migration test: {guild_config.list_configured_guilds()}'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"from config import BOT_CONFIG; print(f''TEST_MODE_ENABLED: {BOT_CONFIG[\"\"TEST_MODE_ENABLED\"\"]}'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import dotenv; dotenv.load_dotenv(); from config import BOT_CONFIG; print(f''TEST_MODE_ENABLED: {BOT_CONFIG[\"\"TEST_MODE_ENABLED\"\"]}'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''C:/Users/FATON-GAMES/Nextcloud/Documents/Programmation/Aegis/Aegis-bot/setup_views.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''C:/Users/FATON-GAMES/Nextcloud/Documents/Programmation/Aegis/Aegis-bot/bot.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''bot.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''setup_views.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''bot.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''bot.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"from config import BOT_CONFIG; print(f''TEST_MODE_ENABLED: {BOT_CONFIG[\"\"TEST_MODE_ENABLED\"\"]}'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"from guild_config import guild_config; print(f''Migration test: {guild_config.list_configured_guilds()}'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"from translations import translator; print(''FR:'', translator.t(''report_modal_title'', 123)); print(''EN:'', translator.t(''report_modal_title'', 123, language=''en''))\")",
      "Bash(git checkout:*)",
      "Bash(git add:*)",
      "Bash(git push:*)",
      "Bash(git pull:*)",
      "Bash(gh pr create:*)",
      "Bash(git commit:*)",
      "Bash(gh pr edit:*)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" run_tests.py --help)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); from tests.discord_mocks import MockUser; print(''Mocks importés avec succès:'', MockUser(123, ''test'').name)\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_all_commands.py::TestAgisCommand::test_agis_guild_not_configured -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import pytest_asyncio; print(''pytest-asyncio version:'', pytest_asyncio.__version__)\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pip install pytest-asyncio)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pip install pytest-mock)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/conftest.py -v --collect-only)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_simple.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" run_tests.py --specific tests/test_simple.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pip install pytest-cov)",
      "Bash(run_tests.bat --help)",
      "Bash(cmd /c:*)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" run_tests.py -c)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" run_tests.py --specific tests/test_simple.py)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" run_tests.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/ --collect-only)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_all_commands; print(''test_all_commands OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_all_ui_components; print(''test_all_ui_components OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_all_ui_components; print(''test_all_ui_components OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_ui_interactions; print(''test_ui_interactions OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_ui_interactions; print(''test_ui_interactions OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_utils; print(''test_utils OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''utils.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_utils; print(''test_utils OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_utils; print(''test_utils OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import sys; sys.path.insert(0, ''.''); import tests.test_integration; print(''test_integration OK'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_simple.py --collect-only)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_all_commands.py --collect-only)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_simple.py tests/test_utils.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_utils_simple.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_simple.py tests/test_utils.py tests/test_commands.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" run_tests.py --specific tests/test_utils.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_utils.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_commands.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_commands.py::TestTranslationSystem::test_translator_french_default -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_commands.py::TestTranslationSystem::test_translator_french_default -v --no-cov)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_translations_isolated.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_all_ui_components.py -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_simple.py tests/test_utils.py tests/test_translations_isolated.py -c pytest_simple.ini)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_core_logic.py -c pytest_simple.ini -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -m pytest tests/test_simple.py tests/test_utils.py tests/test_translations_isolated.py tests/test_core_logic.py -c pytest_simple.ini -v)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"from guild_config import guild_config; print(f''Migration test: {guild_config.list_configured_guilds()}'')\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"from translations import translator; print(''FR:'', translator.t(''report_modal_title'', 123)); print(''EN:'', translator.t(''report_modal_title'', 123, language=''en''))\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''bot.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" test_bot_connection.py)",
      "Bash(find:*)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" test_refactored.py)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" test_new_bot.py)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" main.py)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport discord\nimport asyncio\nfrom core.bot import AegisBot\n\nasync def check_channels():\n    bot = AegisBot()\n    await bot.setup()\n    await bot.login(bot.http.token)\n    \n    guild = bot.get_guild(1401296043504832602)\n    if guild:\n        print(''Canaux disponibles:'')\n        for channel in guild.channels:\n            print(f''- {channel.name} (ID: {channel.id}) - Type: {type(channel).__name__}'')\n    \n    await bot.close()\n\n# Récupérer le token depuis la config\nfrom config.bot_config import bot_settings\nimport os\nos.environ[''DISCORD_TOKEN''] = bot_settings.token\n\nasyncio.run(check_channels())\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''ui/views/validation_views.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''ui/modals/report_modals.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''cogs/dm_handler.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''cogs/reports.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''ui/modals/report_modals.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''database/models/report.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''services/report_service.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''services/report_service.py'', encoding=''utf-8'').read())\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"import ast; ast.parse(open(''cogs/admin.py'', encoding=''utf-8'').read())\")",
      "mcp__supabase-community-supabase-mcp__list_migrations",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport os\nfrom dotenv import load_dotenv\nload_dotenv()\n\nsupabase_url = os.getenv(''SUPABASE_URL'')\nsupabase_key = os.getenv(''SUPABASE_KEY'')\n\nprint(''SUPABASE_URL configuré:'', ''Oui'' if supabase_url else ''Non'')\nprint(''SUPABASE_KEY configuré:'', ''Oui'' if supabase_key else ''Non'')\n\nif supabase_url:\n    print(''URL:'', supabase_url[:30] + ''...'' if len(supabase_url) > 30 else supabase_url)\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport asyncio\nimport sys\nsys.path.insert(0, ''.'')\n\nfrom database.supabase_client import supabase_client\n\nasync def test_connection():\n    print(''Test de connexion Supabase...'')\n    connected = await supabase_client.connect()\n    \n    if connected:\n        print(''✅ Connexion réussie!'')\n        \n        # Test d''une fonction de base  \n        try:\n            stats = await supabase_client.get_guild_stats(123456789)\n            print(f''Stats test: {stats}'')\n        except Exception as e:\n            print(f''Erreur test stats: {e}'')\n            \n        # Test fonction flags récents\n        try:\n            flags = await supabase_client.get_recent_flags()\n            print(f''Flags récents: {len(flags)} trouvés'')\n        except Exception as e:\n            print(f''Erreur test flags: {e}'')\n    else:\n        print(''❌ Échec de connexion'')\n\nasyncio.run(test_connection())\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" database/check_database_state.py)",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport os\nfrom dotenv import load_dotenv\nfrom supabase import create_client\n\nload_dotenv()\n\nsupabase_url = os.getenv(''SUPABASE_URL'')\nsupabase_key = os.getenv(''SUPABASE_KEY'')\n\nprint(''Test connexion base de donnees Supabase...'')\n\ntry:\n    client = create_client(supabase_url, supabase_key)\n    \n    # Test tables existantes\n    tables = [''user_flags'', ''access_logs'', ''flagged_users'', ''query_logs'']\n    \n    for table in tables:\n        try:\n            result = client.table(table).select(''id'').limit(1).execute()\n            print(f''Table {table}: OK'')\n        except Exception as e:\n            print(f''Table {table}: MANQUANTE - {str(e)[:50]}...'')\n            \nexcept Exception as e:\n    print(f''Erreur connexion: {e}'')\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport os\nfrom dotenv import load_dotenv\nload_dotenv()\n\nsupabase_url = os.getenv(''SUPABASE_URL'')\nsupabase_key = os.getenv(''SUPABASE_KEY'')\n\nprint(''SUPABASE_URL configuré:'', ''Oui'' if supabase_url else ''Non'')\nprint(''SUPABASE_KEY configuré:'', ''Oui'' if supabase_key else ''Non'')\n\nif supabase_url:\n    print(''URL:'', supabase_url[:30] + ''...'' if len(supabase_url) > 30 else supabase_url)\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport os\nfrom dotenv import load_dotenv\nfrom supabase import create_client\n\nload_dotenv()\n\nsupabase_url = os.getenv(''SUPABASE_URL'')\nsupabase_key = os.getenv(''SUPABASE_KEY'')\n\nprint(''Test connexion base de donnees Supabase...'')\n\ntry:\n    client = create_client(supabase_url, supabase_key)\n    \n    # Test tables existantes\n    tables = [''user_flags'', ''access_logs'', ''flagged_users'', ''query_logs'']\n    \n    for table in tables:\n        try:\n            result = client.table(table).select(''id'').limit(1).execute()\n            print(f''Table {table}: OK'')\n        except Exception as e:\n            print(f''Table {table}: MANQUANTE - {str(e)[:50]}...'')\n            \nexcept Exception as e:\n    print(f''Erreur connexion: {e}'')\n\")",
      "mcp__supabase-community-supabase-mcp__execute_sql",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport os\nfrom dotenv import load_dotenv\nfrom supabase import create_client\n\nload_dotenv()\n\nsupabase_url = os.getenv(''SUPABASE_URL'')\nsupabase_key = os.getenv(''SUPABASE_KEY'')\n\nprint(''Test connexion base de donnees Supabase...'')\n\ntry:\n    client = create_client(supabase_url, supabase_key)\n    \n    # Test tables existantes\n    tables = [''user_flags'', ''access_logs'', ''flagged_users'', ''query_logs'']\n    \n    for table in tables:\n        try:\n            result = client.table(table).select(''id'').limit(1).execute()\n            print(f''Table {table}: OK'')\n        except Exception as e:\n            print(f''Table {table}: MANQUANTE - {str(e)[:50]}...'')\n            \nexcept Exception as e:\n    print(f''Erreur connexion: {e}'')\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport asyncio\nimport sys\nsys.path.insert(0, ''.'')\n\nfrom database.supabase_client import supabase_client\n\nasync def test_connection():\n    print(''Test de connexion Supabase...'')\n    connected = await supabase_client.connect()\n    \n    if connected:\n        print(''Connexion reussie!'')\n        \n        # Test d''une fonction de base  \n        try:\n            stats = await supabase_client.get_guild_stats(123456789)\n            print(f''Stats test: {stats}'')\n        except Exception as e:\n            print(f''Erreur test stats: {e}'')\n            \n        # Test fonction flags récents\n        try:\n            flags = await supabase_client.get_recent_flags()\n            print(f''Flags récents: {len(flags)} trouvés'')\n        except Exception as e:\n            print(f''Erreur test flags: {e}'')\n    else:\n        print(''Echec de connexion'')\n\nasyncio.run(test_connection())\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport asyncio\nimport sys\nsys.path.insert(0, ''.'')\n\nfrom database.supabase_client import supabase_client\n\nasync def test_new_system():\n    print(''=== TEST NOUVEAU SYSTÈME DE NIVEAUX ==='')\n    \n    connected = await supabase_client.connect()\n    if not connected:\n        print(''Échec connexion'')\n        return\n        \n    print(''✅ Connexion OK'')\n    \n    # Test 1: Utilisateur propre\n    print(''\\n--- Test 1: Utilisateur propre ---'')\n    result = await supabase_client.check_user_flag(999999, 555, ''Test Server'')\n    print(f''Utilisateur propre: {result}'')\n    \n    # Test 2: Ajouter premier flag\n    print(''\\n--- Test 2: Premier flag ---'')\n    add_result = await supabase_client.add_validated_report(\n        888888, ''flaguser'', ''Spam messages'', ''harassment'', 555, ''Test Server''\n    )\n    print(f''Ajout flag: {add_result}'')\n    \n    # Test 3: Vérifier après 1 flag\n    print(''\\n--- Test 3: Vérification après 1 flag ---'')\n    result = await supabase_client.check_user_flag(888888, 555, ''Test Server'')\n    if result:\n        print(f''Flagué: {result[\"\"is_flagged\"\"]}, Niveau: {result[\"\"current_level\"\"]}, ''\n              f''Flags actifs: {result[\"\"active_flags\"\"]}/{result[\"\"total_flags\"\"]}'')\n    \n    # Test 4: Statistiques\n    print(''\\n--- Test 4: Statistiques ---'')\n    stats = await supabase_client.get_guild_stats(555, 30)\n    print(f''Stats: {stats}'')\n\nasyncio.run(test_new_system())\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport asyncio\nimport sys\nsys.path.insert(0, ''.'')\n\nfrom database.supabase_client import supabase_client\n\nasync def test_flag_addition():\n    print(''=== TEST AJOUT FLAG CORRIGE ==='')\n    \n    connected = await supabase_client.connect()\n    if not connected:\n        print(''Echec connexion'')\n        return\n        \n    print(''Connexion OK'')\n    \n    # Test ajout flag\n    print(''\\n--- Test ajout flag ---'')\n    result = await supabase_client.add_validated_report(\n        987654321, ''testpython'', ''Test Python flag'', ''spam'', 555, ''Python Test Server''\n    )\n    print(f''Resultat: {result}'')\n    \n    # Test verification\n    print(''\\n--- Test verification ---'')\n    check_result = await supabase_client.check_user_flag(987654321, 555, ''Check Server'')\n    if check_result:\n        print(f''Flagué: {check_result[\"\"is_flagged\"\"]}, Niveau: {check_result[\"\"current_level\"\"]}, ''\n              f''Flags: {check_result[\"\"active_flags\"\"]}/{check_result[\"\"total_flags\"\"]}'')\n    else:\n        print(''Utilisateur propre'')\n\nasyncio.run(test_flag_addition())\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport asyncio\nimport sys\nsys.path.insert(0, ''.'')\n\nfrom database.supabase_client import supabase_client\n\nasync def test_debug_flag():\n    print(''=== TEST DEBUG AJOUT FLAG ==='')\n    \n    connected = await supabase_client.connect()\n    if not connected:\n        print(''Echec connexion'')\n        return\n        \n    print(''Connexion OK'')\n    \n    # Test ajout flag avec debug\n    result = await supabase_client.add_validated_report(\n        111222333, ''debuguser'', ''Test debug flag'', ''spam'', 555, ''Debug Server''\n    )\n    print(f''Resultat final: {result}'')\n\nasyncio.run(test_debug_flag())\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport asyncio\nimport sys\nsys.path.insert(0, ''.'')\n\nfrom database.supabase_client import supabase_client\n\nasync def test_debug_flag():\n    print(''=== TEST DEBUG AJOUT FLAG CORRIGÉ ==='')\n    \n    connected = await supabase_client.connect()\n    if not connected:\n        print(''Echec connexion'')\n        return\n        \n    print(''Connexion OK'')\n    \n    # Test ajout flag avec debug\n    result = await supabase_client.add_validated_report(\n        444555666, ''debugcorrige'', ''Test debug corrigé'', ''spam'', 555, ''Debug Corrigé Server''\n    )\n    print(f''Resultat final: {result}'')\n\nasyncio.run(test_debug_flag())\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport os\nfrom dotenv import load_dotenv\nfrom supabase import create_client\n\nload_dotenv()\n\nsupabase_url = os.getenv(''SUPABASE_URL'')\nsupabase_key = os.getenv(''SUPABASE_KEY'')\n\nprint(''=== TEST DIRECT SUPABASE CLIENT ==='')\n\ntry:\n    client = create_client(supabase_url, supabase_key)\n    \n    # Test direct de la fonction RPC\n    result = client.rpc(''add_user_flag'', {\n        ''flag_user_id'': 777888999,\n        ''flag_username'': ''testdirect'',\n        ''flag_reason'': ''Test direct Python'',\n        ''flag_category'': ''test'',\n        ''flagging_guild_id'': 555,\n        ''flagging_guild_name'': ''Direct Test Server''\n    }).execute()\n    \n    print(''Result.data:'', result.data)\n    print(''Type:'', type(result.data))\n    if result.data:\n        print(''First item:'', result.data[0])\n        print(''First item type:'', type(result.data[0]))\n        \nexcept Exception as e:\n    print(f''Erreur: {e}'')\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport asyncio\nimport sys\nsys.path.insert(0, ''.'')\n\nfrom database.supabase_client import supabase_client\n\nasync def test_flag_final():\n    print(''=== TEST FINAL AJOUT FLAG ==='')\n    \n    connected = await supabase_client.connect()\n    if not connected:\n        print(''Echec connexion'')\n        return\n        \n    print(''Connexion OK'')\n    \n    # Test ajout flag avec correction\n    result = await supabase_client.add_validated_report(\n        666777888, ''testfinal'', ''Test final corrigé'', ''spam'', 555, ''Final Test Server''\n    )\n    print(f''Resultat final: {result}'')\n\nasyncio.run(test_flag_final())\n\")",
      "Bash(\"C:/Users/FATON-GAMES/AppData/Local/Programs/Python/Python311/python.exe\" -c \"\nimport asyncio\nimport sys\nsys.path.insert(0, ''.'')\n\nfrom database.supabase_client import supabase_client\n\nasync def test_flag_simple():\n    print(''=== TEST SIMPLE AJOUT FLAG ==='')\n    \n    connected = await supabase_client.connect()\n    if not connected:\n        print(''Echec connexion'')\n        return\n        \n    print(''Connexion OK'')\n    \n    # Test ajout flag avec version simplifiée\n    result = await supabase_client.add_validated_report(\n        123321123, ''testsimple'', ''Test version simple'', ''spam'', 555, ''Simple Test Server''\n    )\n    print(f''Resultat: {result}'')\n    \n    if result.get(''success''):\n        print(''SUCCESS ! Le flag a été ajouté correctement !'')\n\nasyncio.run(test_flag_simple())\n\")"
    ],
    "deny": []
  }
}